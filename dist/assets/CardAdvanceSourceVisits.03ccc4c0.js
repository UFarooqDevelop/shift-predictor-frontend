import{aK as E,k as v,bb as U,Q as B,O as I,cW as x,o as b,b as C,w as t,p as l,z as p,q as d,ap as k,y as T,m as z,x as y,aI as N,aV as H,aT as A,U as O,c as K,F as P,a as Q}from"./index.e64df15f.js";import{V as W,_ as G}from"./VDialog.c28267ac.js";import{V as F,a as J,b as X,c as $}from"./VCard.83701cac.js";import{V as Z}from"./VForm.442a2ac4.js";import{V as h,a as m}from"./VRow.44a0774f.js";import{V as f}from"./VTextField.c5daeec6.js";import{V as Y}from"./VBtn.e5e897d5.js";import{V as ee,a as ae,b as le,c as R}from"./VList.3284ee02.js";import{V as te}from"./VAvatar.c8e7782f.js";const oe={__name:"ShiftInfo",props:{shiftData:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:modelValue","submit","update:isDialogVisible"],setup(S,{emit:g}){const i=S,n=v(structuredClone(U(i.shiftData)));B(i,()=>{n.value=structuredClone(U(i.shiftData))});const D=I(()=>{var o,e;return(((o=n.value)==null?void 0:o.start_time)||"N/A")+" - "+(((e=n.value)==null?void 0:e.end_time)||"N/A")}),r=v(!1),u=v(!1),c=v(""),a=I(()=>{var o;return((o=n.value)==null?void 0:o.us_action)===1?"Active":"Inactive"}),_=I(()=>{var o,e;return x(new Date((o=n.value)==null?void 0:o.shift_date)).isValid()===!0?x((e=n.value)==null?void 0:e.shift_date).format("DD/MM/YYYY"):""}),V=o=>{A.post("recomended_shifts/"+n.value.id,{...n.value||{},us_action:o,enjoyment_rating:r.value?1:u.value?2:0}).then(e=>{g("update:isDialogVisible",!1),g("submit",n.value),window.location.reload()}).catch(e=>{alert(e.response.data.message),console.log(e)})},q=o=>{var s,M,j;const e=(s=o==null?void 0:o.shift_date)==null?void 0:s.split("-"),w=e!=null&&e[(e==null?void 0:e.length)-1]?parseInt(e==null?void 0:e[(e==null?void 0:e.length)-1]):0;return console.log(new Date().getHours(),parseInt((M=o==null?void 0:o.end_time)==null?void 0:M.split(":")[0]),w),(o==null?void 0:o.us_action)===1&&(w<new Date().getDate()?(parseInt((j=o==null?void 0:o.end_time)==null?void 0:j.split(":")[0])<new Date().getHours(),!0):!1)},L=o=>{g("update:isDialogVisible",o)};return B([r,u],()=>{(r.value||u.value)&&n.value.us_action===1&&V(1)}),(o,e)=>{const w=G;return b(),C(W,{width:o.$vuetify.display.smAndDown?"auto":700,"model-value":S.isDialogVisible,"onUpdate:modelValue":L},{default:t(()=>[l(w,{onClick:e[0]||(e[0]=s=>L(!1))}),l(F,{class:"pa-sm-14",style:{padding:"0 !important"}},{default:t(()=>[l(J,{class:"text-center"},{default:t(()=>[l(X,{class:"text-h5 mb-3"},{default:t(()=>[p(" Shift Details ")]),_:1})]),_:1}),l($,null,{default:t(()=>[l(Z,{class:"mt-6"},{default:t(()=>[l(h,null,{default:t(()=>[l(m,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(f,{modelValue:d(n).location.address,"onUpdate:modelValue":e[1]||(e[1]=s=>d(n).location.address=s),label:"Location",readonly:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(f,{modelValue:d(_),"onUpdate:modelValue":e[2]||(e[2]=s=>k(_)?_.value=s:null),label:"Date",readonly:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(f,{modelValue:d(D),"onUpdate:modelValue":e[3]||(e[3]=s=>k(D)?D.value=s:null),label:"Start/End Time",readonly:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"6"},{default:t(()=>[l(f,{modelValue:d(a),"onUpdate:modelValue":e[4]||(e[4]=s=>k(a)?a.value=s:null),label:"Status",readonly:""},null,8,["modelValue"])]),_:1}),q(d(n))?(b(),C(m,{key:0,cols:"12"},{default:t(()=>[l($,{class:"pa-0 pb-2"},{default:t(()=>[p(" Did you enjoy this shift? "),l(m,{cols:"12"},{default:t(()=>[l(T,{class:"mr-2",color:d(n).enjoyment_rating===1?"primary":"grey",icon:"mdi-thumbs-up",onClick:e[5]||(e[5]=s=>(r.value=!d(r),u.value=!1))},null,8,["color"]),l(T,{class:"mr-2",color:d(n).enjoyment_rating===2?"primary":"grey",icon:"mdi-thumb-down",onClick:e[6]||(e[6]=s=>(u.value=2,r.value=!1))},null,8,["color"])]),_:1}),d(c)?(b(),C(m,{key:0,class:"mt-0 pt-0 text-error",style:{"font-weight":"600"},cols:"12"},{default:t(()=>[z("span",null,y(d(c)),1)]),_:1})):N("",!0)]),_:1})]),_:1})):N("",!0),l(m,{cols:"12",class:"d-flex flex-wrap justify-start gap-4"},{default:t(()=>[l(Y,{onClick:e[7]||(e[7]=H(s=>V(1),["stop"]))},{default:t(()=>[p(" Accept ")]),_:1}),l(Y,{onClick:e[8]||(e[8]=s=>V(2))},{default:t(()=>[p(" Reject ")]),_:1}),l(Y,{onClick:e[9]||(e[9]=s=>V(3))},{default:t(()=>[p(" Not Interested ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ne=E(oe,[["__scopeId","data-v-cc810c78"]]);const se={__name:"CardAdvanceSourceVisits",setup(S){const g=v([]),i=v(!1),n=v(),D=u=>{i.value=!0,n.value=u};O(()=>{r()});function r(){A.get("recomended_shifts").then(u=>{var c;g.value=(c=u.data)==null?void 0:c.data}).catch(u=>{console.log(u)})}return(u,c)=>(b(),C(F,{title:"Recommended Shifts","max-height":"550px",style:{"overflow-y":"auto"}},{default:t(()=>[l($,null,{default:t(()=>[l(ee,{class:"card-list"},{default:t(()=>[(b(!0),K(P,null,Q(d(g),a=>(b(),C(ae,{key:a.id},{prepend:t(()=>[l(te,{border:!1,size:"34",color:(a==null?void 0:a.us_action)===0?"primary":"success",circle:""},{default:t(()=>[l(T,{icon:(a==null?void 0:a.us_action)===1?"tabler-check":"tabler-plus",onClick:_=>D(a)},null,8,["icon","onClick"])]),_:2},1032,["color"])]),default:t(()=>[l(le,{class:"font-weight-semibold"},{default:t(()=>{var _,V;return[p(y((_=a==null?void 0:a.location)!=null&&_.address?(V=a==null?void 0:a.location)==null?void 0:V.address:""),1)]}),_:2},1024),l(R,null,{default:t(()=>[p(" Scheduled at: "+y(a!=null&&a.shift_date?d(x)(a==null?void 0:a.shift_date).format("DD/MM/YYYY"):"")+" @ "+y(a!=null&&a.start_time?a==null?void 0:a.start_time:""),1)]),_:2},1024),l(R,null,{default:t(()=>[p(" Last updated: "+y(a!=null&&a.updated_at?d(x)(a==null?void 0:a.updated_at).format("DD/MM/YYYY"):""),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(ne,{isDialogVisible:d(i),"onUpdate:isDialogVisible":c[0]||(c[0]=a=>k(i)?i.value=a:null),"shift-data":d(n),onSubmit:r},null,8,["isDialogVisible","shift-data"])]),_:1}))}},ve=E(se,[["__scopeId","data-v-7dd3ebaf"]]);export{ve as C};
