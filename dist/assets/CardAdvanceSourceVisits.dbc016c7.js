import{aK as A,k as b,bb as R,Q as U,O as Y,o as V,b as k,w as t,p as l,z as i,q as o,ap as N,y as S,m as q,x as C,aI as j,aV as z,aT as E,U as O,c as T,F as H,a as K}from"./index.26ca9a5e.js";import{V as P,_ as Q}from"./VDialog.efd5d8c2.js";import{V as F,a as G,b as J,c as w}from"./VCard.f0ece592.js";import{V as W}from"./VForm.05d79810.js";import{V as X,a as _}from"./VRow.6c18a1e2.js";import{V as x}from"./VTextField.02f6d837.js";import{V as $}from"./VBtn.fc10e72a.js";import{h as B}from"./moment.9709ab41.js";import{V as Z}from"./VDivider.a3094d05.js";import{V as h,a as ee,b as ae,c as M}from"./VList.3d575f4d.js";import{V as le}from"./VAvatar.e198df2c.js";const te={__name:"ShiftInfo",props:{shiftData:{type:Object,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:modelValue","submit","update:isDialogVisible"],setup(I,{emit:v}){const c=I,s=b(structuredClone(R(c.shiftData)));U(c,()=>{s.value=structuredClone(R(c.shiftData))});const y=Y(()=>{var d,e;return(((d=s.value)==null?void 0:d.start_time)||"N/A")+" - "+(((e=s.value)==null?void 0:e.end_time)||"N/A")}),r=b(!1),u=b(!1),m=b(""),g=Y(()=>{var d,e,f;return((d=s.value)==null?void 0:d.us_action)===1?"Accepted":((e=s.value)==null?void 0:e.us_action)===2?"Rejected":((f=s.value)==null?void 0:f.us_action)===3?"Not Interested":""}),a=d=>{E.post("recomended_shifts/"+s.value.id,{...s.value||{},us_action:d,enjoyment_rating:r.value?1:(u.value,0)}).then(e=>{v("update:isDialogVisible",!1),v("submit",s.value)}).catch(e=>{console.log(e)})},p=d=>{var n,L;const e=(n=d==null?void 0:d.shift_date)==null?void 0:n.split("-"),f=e!=null&&e[(e==null?void 0:e.length)-1]?parseInt(e==null?void 0:e[(e==null?void 0:e.length)-1]):0;return(d==null?void 0:d.us_action)===1&&(f<new Date().getDate()?(parseInt((L=d==null?void 0:d.end_time)==null?void 0:L.split(":")[0])<new Date().getHours(),!0):!1)},D=d=>{v("update:isDialogVisible",d)};return U([r,u],()=>{(r.value||u.value)&&s.value.us_action===1&&a(1)}),(d,e)=>{const f=Q;return V(),k(P,{width:d.$vuetify.display.smAndDown?"auto":700,"model-value":I.isDialogVisible,"onUpdate:modelValue":D},{default:t(()=>[l(f,{onClick:e[0]||(e[0]=n=>D(!1))}),l(F,{class:"pa-sm-14",style:{padding:"0 !important"}},{default:t(()=>[l(G,{class:"text-center"},{default:t(()=>[l(J,{class:"text-h5 mb-3"},{default:t(()=>[i(" Shift Details ")]),_:1})]),_:1}),l(w,null,{default:t(()=>[l(W,{class:"mt-6"},{default:t(()=>[l(X,null,{default:t(()=>[l(_,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(x,{modelValue:o(s).location.address,"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).location.address=n),label:"Location",readonly:""},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(x,{modelValue:o(s).shift_date,"onUpdate:modelValue":e[2]||(e[2]=n=>o(s).shift_date=n),label:"Date",readonly:""},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",md:"6",lg:"4"},{default:t(()=>[l(x,{modelValue:o(y),"onUpdate:modelValue":e[3]||(e[3]=n=>N(y)?y.value=n:null),label:"Start/End Time",readonly:""},null,8,["modelValue"])]),_:1}),l(_,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:o(g),"onUpdate:modelValue":e[4]||(e[4]=n=>N(g)?g.value=n:null),label:"Status",readonly:""},null,8,["modelValue"])]),_:1}),p(o(s))?(V(),k(_,{key:0,cols:"12"},{default:t(()=>[l(w,{class:"pa-0 pb-2"},{default:t(()=>[i(" Did you enjoy this shift? "),l(_,{cols:"12"},{default:t(()=>[l(S,{class:"mr-2",color:o(r)?"primary":"grey",icon:"mdi-thumbs-up",onClick:e[5]||(e[5]=n=>(r.value=!o(r),u.value=!1))},null,8,["color"]),l(S,{class:"mr-2",color:o(u)?"primary":"grey",icon:"mdi-thumb-down",onClick:e[6]||(e[6]=n=>(u.value=!o(u),r.value=!1))},null,8,["color"])]),_:1}),o(m)?(V(),k(_,{key:0,class:"mt-0 pt-0 text-error",style:{"font-weight":"600"},cols:"12"},{default:t(()=>[q("span",null,C(o(m)),1)]),_:1})):j("",!0)]),_:1})]),_:1})):j("",!0),l(_,{cols:"12",class:"d-flex flex-wrap justify-start gap-4"},{default:t(()=>[l($,{disabled:p(o(s)),onClick:e[7]||(e[7]=z(n=>a(1),["stop"]))},{default:t(()=>[i(" Accept ")]),_:1},8,["disabled"]),l($,{disabled:p(o(s)),onClick:e[8]||(e[8]=n=>a(2))},{default:t(()=>[i(" Reject ")]),_:1},8,["disabled"]),l($,{disabled:p(o(s)),onClick:e[9]||(e[9]=n=>a(3))},{default:t(()=>[i(" Not Interested ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},oe=A(te,[["__scopeId","data-v-0c0848f1"]]);const se={key:0},de={key:1},ne={__name:"CardAdvanceSourceVisits",setup(I){const v=b([]),c=b(!1),s=b(),y=u=>{c.value=!0,s.value=u};O(()=>{r()});function r(){E.get("recomended_shifts").then(u=>{var m;v.value=(m=u.data)==null?void 0:m.data}).catch(u=>{console.log(u)})}return(u,m)=>(V(),k(F,{title:"Recommended Shifts","max-height":"550px",style:{"overflow-y":"auto"}},{default:t(()=>{var g;return[l(Z,{class:"my-2"}),(g=o(v))!=null&&g.length?(V(),T("span",se,[l(w,null,{default:t(()=>[l(h,{class:"card-list"},{default:t(()=>[(V(!0),T(H,null,K(o(v),a=>(V(),k(ee,{key:a.id},{prepend:t(()=>[l(le,{border:!1,size:"34",color:(a==null?void 0:a.us_action)===0?"primary":"success",circle:""},{default:t(()=>[l(S,{icon:(a==null?void 0:a.us_action)===1?"tabler-check":"tabler-plus",onClick:p=>y(a)},null,8,["icon","onClick"])]),_:2},1032,["color"])]),default:t(()=>[l(ae,{class:"font-weight-semibold"},{default:t(()=>{var p,D;return[i(C((p=a==null?void 0:a.location)!=null&&p.address?(D=a==null?void 0:a.location)==null?void 0:D.address:""),1)]}),_:2},1024),l(M,null,{default:t(()=>[i(C(a!=null&&a.shift_date?o(B)(a==null?void 0:a.shift_date).format("DD/MM/YYYY"):"")+" @ "+C(a!=null&&a.start_time?a==null?void 0:a.start_time:""),1)]),_:2},1024),l(M,null,{default:t(()=>[i(C(a!=null&&a.updated_at?o(B)(a==null?void 0:a.updated_at).format("DD/MM/YYYY"):""),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(oe,{isDialogVisible:o(c),"onUpdate:isDialogVisible":m[0]||(m[0]=a=>N(c)?c.value=a:null),"shift-data":o(s),onSubmit:r},null,8,["isDialogVisible","shift-data"])])):(V(),T("span",de,[l(w,{class:"text-center text-info"},{default:t(()=>[l(S,{class:"mr-2"},{default:t(()=>[i("mdi-info")]),_:1}),i(" No Data Available ")]),_:1})]))]}),_:1}))}},fe=A(ne,[["__scopeId","data-v-52461f6d"]]);export{fe as C};
